/* This Source Code Form is subject to the terms of the Mozilla Public
* License, v. 2.0. If a copy of the MPL was not distributed with this
* file, You can obtain one at http://mozilla.org/MPL/2.0/. */
browser.runtime.onInstalled.addListener(function(){browser.runtime.openOptionsPage()});
(function(){function e(){}function k(){var b=document.getElementsByTagName("span"),a;for(a in b)if(void 0!=b[a].id&&-1!=b[a].id.indexOf("Label")){var f=browser.i18n.getMessage(b[a].id);""!=f&&(b[a].innerHTML=f)}b=document.getElementsByTagName("input");for(var c in b)if(void 0!=b[c].className&&-1!=b[c].className.indexOf("Label"))switch(b[c].type){case "button":case "submit":b[c].value=browser.i18n.getMessage(b[c].className)}}function l(){return new Promise(function(b,a){browser.storage.local.get("Settings",
function(a){for(var c in d)void 0!=a.Settings&&void 0!=a.Settings[c]&&(d[c]=a.Settings[c]);for(var f in a.Settings)void 0==d[f]&&(d[f]=a.Settings[f]);b()})})}function h(){var b=document.getElementsByTagName("input"),a;for(a in b)if(void 0==b[a].className||-1==b[a].className.indexOf("noSetting"))switch(b[a].type){case "text":case "search":case "tel":case "url":case "email":case "password":case "datetime":case "month":case "week":case "time":case "datetime-local":case "range":case "color":d[b[a].id]=
b[a].value;break;case "checkbox":d[b[a].id]=b[a].checked;break;case "radio":1==b[a].checked&&(d[b[a].name]=b[a].value)}}function m(){return new Promise(function(b,a){browser.storage.local.get("Settings",function(a){d=a.Settings;b()})})}function g(){return new Promise(function(b,a){browser.storage.local.set({Settings:d}).then(function(){b()})})}e.prototype.initOptionsPage=function(){return new Promise(function(b,a){k();h();l().then(function(){var a=document.getElementsByTagName("input"),c;for(c in a)if(void 0==
a[c].className||-1==a[c].className.indexOf("noSetting"))switch(a[c].type){case "text":case "search":case "tel":case "url":case "email":case "password":case "datetime":case "month":case "week":case "time":case "datetime-local":case "range":case "color":a[c].value=d[a[c].id];break;case "checkbox":a[c].checked=d[a[c].id];break;case "radio":d[a[c].name]==a[c].value&&(a[c].checked=!0)}g();b()})})};e.prototype.saveOptionsPage=function(){return new Promise(function(b,a){h();g().then(function(){b()})})};
e.prototype.init=function(){return new Promise(function(b,a){m().then(function(){b()})})};e.prototype.get=function(){return d};e.prototype.save=function(b){return new Promise(function(a,e){for(var c in b)d[c]=b[c];g().then(function(){a()})})};e.prototype.clear=function(){return new Promise(function(b,a){d=new e;g().then(function(){b()})})};var d=new e;S=new e})();